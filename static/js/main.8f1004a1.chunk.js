(this.webpackJsonpaviasales=this.webpackJsonpaviasales||[]).push([[0],[,,function(e,t,a){e.exports={ticket:"Ticket_ticket__1T8no",ticketHeader:"Ticket_ticketHeader__2n-lY",ticketPrice:"Ticket_ticketPrice__3G7Yj",ticketBody:"Ticket_ticketBody__16qF_",bodyRow:"Ticket_bodyRow__3KH2P",titleRow:"Ticket_titleRow__3DwJT",textRow:"Ticket_textRow__3WD3C"}},,,function(e,t,a){e.exports={Item:"Checkbox_Item__1a4e_",ItemText:"Checkbox_ItemText__1zqmU",Checkbox:"Checkbox_Checkbox__1LWIb",Checkbox__box:"Checkbox_Checkbox__box__3roUv",Checkbox__check:"Checkbox_Checkbox__check__1MW0s",animBorder:"Checkbox_animBorder__3tlie",reverse:"Checkbox_reverse__2jJvZ"}},function(e,t,a){e.exports={SortingTabs:"Sorting_SortingTabs__2xZgh",SortingTab:"Sorting_SortingTab__XOoGH",SortingTab_active:"Sorting_SortingTab_active__3kcI4"}},function(e,t,a){e.exports={appInformer:"Search_appInformer__3W-Jx",appContentInner:"Search_appContentInner__3rag5",appContent:"Search_appContent__3T0cx",sorting:"Search_sorting__127IK"}},function(e,t,a){e.exports={Switcher:"ThemeSwitcher_Switcher__24jPt",SwitcherInput:"ThemeSwitcher_SwitcherInput__2llKm",SwitcherLabel:"ThemeSwitcher_SwitcherLabel__8uTay",SwitcherToggle:"ThemeSwitcher_SwitcherToggle__pAHiU"}},function(e,t,a){e.exports={FilterList:"FilterList_FilterList__3NBb4",Title:"FilterList_Title__1J-o0"}},,,function(e,t,a){e.exports={TicketList:"TicketList_TicketList__2FqMo"}},function(e,t,a){e.exports={Alert:"Alert_Alert__148YI"}},function(e,t,a){e.exports=a.p+"static/media/Logo.0c089234.svg"},function(e,t,a){e.exports=a(21)},,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(11),i=a.n(r),o=(a(20),a(1)),s=["--background-app: #f3f7fa","--body-text: #4A4A4A","--box-shadow: rgba(0, 0, 0, 0.1)","--filter-background: #fff","--filter-hover-item: #F1FCFF","--filter-text: #4A4A4A","--checkbox-box: rgba(154, 187, 206, 1)","--checkbox-box-check: #2196F3","--sorting-tab-background: #fff","--sorting-tab-background-active: #2196F3","--sorting-tab-background-hover: #F1FCFF","--sorting-tab-text: #4A4A4A","--sorting-tab-text-active: #fff","--sorting-tab-text-hover: #2196F3","--sorting-tab-border: #DFE5EC","--sorting-tab-border-hover: #2196F3","--ticket-background: #fff","--ticket-price: #2196F3","--ticket-text-subtitle: #A0B0B9","--ticket-text: #4A4A4A"],l=["--background-app: #05263f","--body-text: #fff","--box-shadow: rgba(0, 0, 0, 0.1)","--filter-background: #1e3c52","--filter-hover-item: #355064","--filter-text: #fff","--checkbox-box: rgba(154, 187, 206, 1)","--checkbox-box-check: #2196F3","--sorting-tab-background: #1e3c52","--sorting-tab-background-active: #2196f3","--sorting-tab-background-hover: #031b2c","--sorting-tab-text: #fff","--sorting-tab-text-active: #fff","--sorting-tab-text-hover: #fff","--sorting-tab-border: #000","--sorting-tab-border-hover: #000","--ticket-background: #1e3c52","--ticket-price: #f57c00","--ticket-text-subtitle: #A0B0B9","--ticket-text: #fff"],u=c.a.createContext({dark:!1,toggle:function(){}}),m=a(3),f=a(7),b=a.n(f),h=a(4),d=a(5),k=a.n(d),_=function(e){var t=e.item,a=e.checked,r=Object(n.useState)(t.isChecked),i=Object(o.a)(r,2),s=i[0],l=i[1];Object(n.useEffect)((function(){l(e.item.isChecked)}),[e.item.isChecked]);return c.a.createElement("label",{className:k.a.Item},c.a.createElement("input",{type:"checkbox",checked:s,onChange:function(){l(!s),a(t.id,!s)}}),c.a.createElement("svg",{viewBox:"0 0 100 100",className:k.a.Checkbox},c.a.createElement("path",{className:k.a.Checkbox__box,d:"M82,89H18c-3.87,0-7-3.13-7-7V18c0-3.87,3.13-7,7-7h64c3.87,0,7,3.13,7,7v64C89,85.87,85.87,89,82,89z"}),c.a.createElement("polyline",{className:k.a.Checkbox__check,points:"25.5,53.5 39.5,67.5 72.5,34.5 "})),c.a.createElement("span",{className:k.a.ItemText},t.value))},p=a(9),g=a.n(p),v=function(e){var t=e.sortTickets,a=t.hiddenTickets,r=t.sortNonStop,i=t.sortStops,s=Object(n.useState)([{value:"\u0412\u0441\u0435",id:"checkedAll",isChecked:!0},{value:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",id:"nonStop",isChecked:!0},{value:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",id:1,isChecked:!0},{value:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",id:2,isChecked:!0},{value:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",id:3,isChecked:!0}]),l=Object(o.a)(s,2),u=l[0],m=l[1],f=function(e,t){if(t){var a=u.map((function(t){return t.id===e?Object(h.a)({},t,{isChecked:!0}):Object(h.a)({},t)}));m(a)}else{var n=u.map((function(t){return t.id===e||"checkedAll"===t.id?Object(h.a)({},t,{isChecked:!1}):Object(h.a)({},t)}));m(n)}},b=function(e,t){if("checkedAll"===e){if(!0===t){var n=u.map((function(e){return Object(h.a)({},e,{isChecked:!0})}));m(n)}else{var c=u.map((function(e){return Object(h.a)({},e,{isChecked:!1})}));m(c)}a(t)}else"nonStop"===e?(f(e,t),r(t)):(f(e,t),i(e,t))};return c.a.createElement("div",{className:g.a.FilterList},c.a.createElement("h2",{className:g.a.Title},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),c.a.createElement("ul",null,u.map((function(e){return c.a.createElement("li",{key:e.id},c.a.createElement(_,{item:e,checked:b}))}))))},x=a(2),E=a.n(x),w=function(e){var t=e.ticket;return c.a.createElement("div",{className:E.a.ticket},c.a.createElement("div",{className:E.a.ticketHeader},c.a.createElement("div",{className:E.a.ticketPrice},"".concat(t.price.toLocaleString()," P")),c.a.createElement("div",{className:E.a.ticketCarrier},c.a.createElement("img",{src:"".concat("http://pics.avs.io/99/36/").concat(t.carrier,".png"),alt:t.carrier}))),c.a.createElement("div",{className:E.a.ticketBody},t.segments.map((function(e,t){return c.a.createElement("div",{className:E.a.bodyRow,key:"segmentRow-".concat(t)},c.a.createElement("div",null,c.a.createElement("span",{className:E.a.titleRow},e.origin," \u2013 ",e.destination),c.a.createElement("span",{className:E.a.textRow},function(e,t){var a=e.slice(0,-1).split("T"),n=Object(o.a)(a,2)[1].split(":"),c=Object(o.a)(n,2),r=c[0],i=c[1],s=60*Number(r)+Number(i)+t,l=s/60>=24?Math.floor(s/60-24):Math.floor(s/60),u=s%60,m=l<10?"0".concat(l):l,f=u<10?"0".concat(u):u;return"".concat(r,":").concat(i," - ").concat(m,":").concat(f)}(e.date,e.duration))),c.a.createElement("div",null,c.a.createElement("span",{className:E.a.titleRow},"\u0412 \u043f\u0443\u0442\u0438"),c.a.createElement("span",{className:E.a.textRow},function(e){var t=Math.round(e/60),a=e%60;return"".concat(t,"\u0447 : ").concat(a,"\u043c")}(e.duration))),c.a.createElement("div",null,c.a.createElement("span",{className:E.a.titleRow},e.stops.length>0?"".concat(e.stops.length," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a").concat(1===e.stops.length?"a":"\u0438"):"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),c.a.createElement("span",{className:E.a.textRow},e.stops.join(", "))))}))))},S=a(12),T=a.n(S),C=function(e){var t=e.tickets;return c.a.createElement("ul",{className:T.a.TicketList},t.map((function(e,t){return c.a.createElement("li",{key:"ticketKey-".concat(t)},c.a.createElement(w,{ticket:e}))})))},j=a(6),N=a.n(j),O=function(e){var t=e.sorts,a=Object(n.useState)("low price"),r=Object(o.a)(a,2),i=r[0],s=r[1];return c.a.createElement("div",null,c.a.createElement("ul",{className:N.a.SortingTabs},[{value:"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439",id:"low price"},{value:"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439",id:"fastest"}].map((function(e){return c.a.createElement("li",{key:e.id,className:i===e.id?[N.a.SortingTab,N.a.SortingTab_active].join(" "):N.a.SortingTab,onClick:function(){var a;(a=e.id)!==i&&(s(a),t.sortTabs(a))}},c.a.createElement("span",{className:N.a.SortingTitle},e.value))}))))},y=a(13),F=a.n(y),I=function(){return c.a.createElement("div",{className:F.a.Alert},c.a.createElement("span",null,"\ud83d\ude1f \u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"),c.a.createElement("button",{onClick:function(){return window.location.reload()}},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"))},A=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(!1),s=Object(o.a)(i,2),l=s[0],u=s[1],f=Object(n.useState)(null),h=Object(o.a)(f,2),d=h[0],k=h[1],_=Object(n.useState)("low price"),p=Object(o.a)(_,2),g=p[0],x=p[1],E=Object(n.useState)(null),w=Object(o.a)(E,2),S=w[0],T=w[1];Object(n.useEffect)((function(){fetch("https://front-test.beta.aviasales.ru/search").then((function(e){return e.json()})).then((function(e){var t=e.searchId;return fetch("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(t))})).then((function(e){return e.json()})).then((function(e){var t=e.tickets;r(t.slice(0,5)),k(t.slice(0,5))})).catch((function(){return u(!0)}))}),[]),Object(n.useEffect)((function(){!function(){if(d){if("low price"===g){var e=Object(m.a)(d).sort((function(e,t){return e.price>t.price?1:-1}));T(e)}if("fastest"===g){var t=Object(m.a)(d).sort((function(e,t){var a=e.segments.reduce((function(e,t){return t.duration+e}),0),n=t.segments.reduce((function(e,t){return t.duration+e}),0);return a>n?1:a<n?-1:0}));T(t)}}}()}),[d,g]);return c.a.createElement("div",{className:b.a.appContentInner},c.a.createElement("div",{className:b.a.appInformer},c.a.createElement(v,{sortTickets:{hiddenTickets:function(e){k(e?a:[])},sortNonStop:function(e){if(e){var t=a.filter((function(e){return e.segments.every((function(e){return 0===e.stops.length}))}));k([].concat(Object(m.a)(d),Object(m.a)(t)))}else{var n=d.filter((function(e){return e.segments.some((function(e){return e.stops.length>0}))}));k(n)}},sortStops:function(e,t){if(t){var n=a.filter((function(t){var a=t.segments.some((function(t){return t.stops.length===e})),n=t.segments.every((function(t){return t.stops.length<=e}));return a&&n}));k([].concat(Object(m.a)(d),Object(m.a)(n)))}else{var c=d.filter((function(t){var a=t.segments.some((function(t){return t.stops.length>e})),n=t.segments.every((function(t){return t.stops.length<e}));return a||n}));k(c)}}}})),c.a.createElement("div",{className:b.a.appContent},c.a.createElement("div",{className:b.a.sorting},c.a.createElement(O,{sorts:{sortTabs:function(e){x(e)}}})),S?c.a.createElement(C,{tickets:S}):l?c.a.createElement(I,null):null))},L=a(14),B=a.n(L),R=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("img",{src:B.a,alt:"logo"}))},H=a(8),M=a.n(H),P=function(){var e=Object(n.useContext)(u),t=e.dark,a=e.toggle;return c.a.createElement("div",{className:M.a.Switcher},c.a.createElement("input",{type:"checkbox",id:"theme-switcher",className:M.a.SwitcherInput,checked:t,onChange:function(){return a()}}),c.a.createElement("label",{htmlFor:"theme-switcher",className:M.a.SwitcherLabel},c.a.createElement("span",{className:M.a.SwitcherToggle})))};var J=function(){return c.a.createElement("div",{className:"app"},c.a.createElement("div",{className:"app__inner"},c.a.createElement("div",{className:"navbar"},c.a.createElement(R,null),c.a.createElement(P,null)),c.a.createElement("section",{className:"app__section"},c.a.createElement(A,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement((function(e){var t=e.children,a=Object(n.useState)(!1),r=Object(o.a)(a,2),i=r[0],m=r[1],f=function(e){document.getElementsByTagName("html")[0].style.cssText=e.join(";")};Object(n.useLayoutEffect)((function(){"true"===window.localStorage.getItem("darkTheme")?(m(!0),f(l)):(m(!1),f(s))}),[i]);return c.a.createElement(u.Provider,{value:{dark:i,toggle:function(){m(!i),window.localStorage.setItem("darkTheme",!i)}}},t)}),null,c.a.createElement(J,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[15,1,2]]]);
//# sourceMappingURL=main.8f1004a1.chunk.js.map